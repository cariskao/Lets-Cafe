(function(e){function t(t){for(var a,o,u=t[0],s=t[1],i=t[2],l=0,d=[];l<u.length;l++)o=u[l],c[o]&&d.push(c[o][0]),c[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);f&&f(t);while(d.length)d.shift()();return r.push.apply(r,i||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var u=n[o];0!==c[u]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},o={app:0},c={app:0},r=[];function u(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2818cf8b":"a9d8f40f","chunk-2a135062":"fbb6b692","chunk-2d0d3a2c":"83e3c605","chunk-2d0d6b90":"dd76e09f","chunk-2d225006":"fa92c953","chunk-37b6125f":"22494818","chunk-3a71ca74":"8c70d242","chunk-3df45036":"8fd7c2ec","chunk-7bb8e09d":"f87ff13d","chunk-7c247ad6":"17a4460e","chunk-9f5ced78":"aef44c2e"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-3df45036":1,"chunk-7bb8e09d":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-2818cf8b":"31d6cfe0","chunk-2a135062":"31d6cfe0","chunk-2d0d3a2c":"31d6cfe0","chunk-2d0d6b90":"31d6cfe0","chunk-2d225006":"31d6cfe0","chunk-37b6125f":"31d6cfe0","chunk-3a71ca74":"31d6cfe0","chunk-3df45036":"9543d620","chunk-7bb8e09d":"07286e67","chunk-7c247ad6":"31d6cfe0","chunk-9f5ced78":"31d6cfe0"}[e]+".css",c=s.p+a,r=document.getElementsByTagName("link"),u=0;u<r.length;u++){var i=r[u],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===a||l===c))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){i=d[u],l=i.getAttribute("data-href");if(l===a||l===c)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||c,r=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");r.request=a,delete o[e],f.parentNode.removeChild(f),n(r)},f.href=c;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){o[e]=0}));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise(function(t,n){a=c[e]=[t,n]});t.push(a[2]=r);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=u(e),i=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,r=new Error("Loading chunk "+e+" failed.\n("+a+": "+o+")");r.type=a,r.request=o,n[1](r)}c[e]=void 0}};var d=setTimeout(function(){i({type:"timeout",target:l})},12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/Lets-Cafe/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var f=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"4a2f":function(e,t,n){"use strict";var a=n("dfbe"),o=n.n(a);o.a},"56a6":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-alert"},e._l(e.messages,function(t,a){return n("div",{key:a,staticClass:"alert alert-dismissible",class:"alert-"+t.status},[e._v("\n    "+e._s(t.message)+"\n    "),n("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){return e.removeMessage(a)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])}),0)},o=[],c={name:"AlertMessage",data:function(){return{messages:[]}},methods:{updateMessage:function(e,t){var n=Math.floor(new Date/1e3);this.messages.push({message:e,status:t,timestamp:n}),this.removeMessageWithTiming(n)},removeMessage:function(e){this.messages.splice(e,1)},removeMessageWithTiming:function(e){var t=this;setTimeout(function(){t.messages.forEach(function(n,a){n.timestamp===e&&t.messages.splice(a,1)})},5e3)}},created:function(){var e=this;e.$bus.$on("push-msg",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";e.updateMessage(t,n)})}},r=c,u=(n("4a2f"),n("2877")),s=Object(u["a"])(r,a,o,!1,null,null,null);t["a"]=s.exports},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=n("2f62"),c=n("bc3a"),r=n.n(c),u=n("a7fe"),s=n.n(u),i=n("9062"),l=n.n(i),d=n("7bb1"),f=n("427f"),p=n.n(f),h=(n("e40d"),n("4989"),n("56a6")),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex justify-content-center"},[n("nav",{attrs:{"aria-label":"Page navigation example"}},[n("ul",{staticClass:"pagination border"},[n("li",{staticClass:"page-item",class:{disabled:!e.Pages.has_pre}},[n("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(t){return t.preventDefault(),e.getPage(e.Pages.current_page-1)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("«")])])]),e._l(e.Pages.total_pages,function(t){return n("li",{key:t,staticClass:"page-item",class:{active:e.Pages.current_page===t}},[n("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.getPage(t)}}},[e._v(e._s(t))])])}),n("li",{staticClass:"page-item",class:{disabled:!e.Pages.has_next}},[n("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(t){return t.preventDefault(),e.getPage(e.Pages.current_page+1)}}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("»")])])])],2)])])},g=[],_={name:"pagination",props:{Pages:{type:Object}},methods:{getPage:function(e){this.$emit("getPage",e)}}},P=_,b=n("2877"),v=Object(b["a"])(P,m,g,!1,null,null,null),A=v.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},C=[],k={name:"App"},O=k,U=(n("5c0b"),Object(b["a"])(O,E,C,!1,null,null,null)),L=U.exports,I=n("8c4f");a["a"].use(I["a"]);var T=new I["a"]({routes:[{path:"*",redirect:"/"},{path:"/",component:function(){return n.e("chunk-7bb8e09d").then(n.bind(null,"d6ae"))},children:[{path:"",name:"AllProducts",component:function(){return n.e("chunk-7c247ad6").then(n.bind(null,"53c4"))}},{path:"uni_product/:id",name:"UniProduct",component:function(){return n.e("chunk-2818cf8b").then(n.bind(null,"1b2d"))}},{path:"cart",name:"Cart",component:function(){return n.e("chunk-3a71ca74").then(n.bind(null,"0c34"))}},{path:"order",name:"Order",component:function(){return n.e("chunk-2d0d6b90").then(n.bind(null,"7485"))}},{path:"checkout/:orderId",name:"Checkout",component:function(){return n.e("chunk-2d0d3a2c").then(n.bind(null,"5e39"))}}]},{path:"/login",name:"Login",component:function(){return n.e("chunk-3df45036").then(n.bind(null,"294f"))}},{path:"/admin",name:"Dashboard",component:function(){return n.e("chunk-2d225006").then(n.bind(null,"e313"))},children:[{path:"products",name:"Products",component:function(){return n.e("chunk-2a135062").then(n.bind(null,"61bc"))},meta:{requiresAuth:!0}},{path:"coupons",name:"Coupons",component:function(){return n.e("chunk-9f5ced78").then(n.bind(null,"8c58"))},meta:{requiresAuth:!0}},{path:"orders",name:"Orders",component:function(){return n.e("chunk-37b6125f").then(n.bind(null,"efd9"))},meta:{requiresAuth:!0}}]}]}),y=n("774e"),N=n.n(y),D=n("b6d0"),w=n.n(D),V={namespaced:!0,state:{products:[],product:{},categories:[],newProduct:[]},actions:{getProducts:function(e){var t="".concat(Object({NODE_ENV:"production",VUE_APP_API:"https://vue-course-api.hexschool.io",VUE_APP_CLI_UI_URL:"",VUE_APP_CUSTOM_PATH:"charles",BASE_URL:"/Lets-Cafe/"}).VUE_APP_API_PATH,"/api/").concat("charles","/products/all");e.commit("LOADING",!0,{root:!0}),r.a.get(t).then(function(t){console.log("user 產品列表",t),e.commit("PRODUCTS",t.data.products),e.commit("CATEGORIES",t.data.products),e.commit("NEWPRODUCT",t.data.products),e.commit("LOADING",!1,{root:!0})})},getProduct:function(e,t){var n="".concat(Object({NODE_ENV:"production",VUE_APP_API:"https://vue-course-api.hexschool.io",VUE_APP_CLI_UI_URL:"",VUE_APP_CUSTOM_PATH:"charles",BASE_URL:"/Lets-Cafe/"}).VUE_APP_API_PATH,"/api/").concat("charles","/product/").concat(t);e.commit("LOADING",!0,{root:!0}),r.a.get(n).then(function(t){console.log("查看更多",t),e.commit("PRODUCT",t.data.product),e.commit("LOADING",!1,{root:!0})})}},mutations:{PRODUCTS:function(e,t){e.products=t},PRODUCT:function(e,t){e.product=t,e.product.num=1},CATEGORIES:function(e,t){var n=new w.a;t.forEach(function(e){n.add(e.category)}),e.categories=N()(n)},NEWPRODUCT:function(e,t){e.newProduct=t.slice(5,9),console.log("熱銷咖啡",e.newProduct)}},getters:{products:function(e){return e.products},product:function(e){return e.product},categories:function(e){return e.categories},newProduct:function(e){return e.newProduct}}},S=n("1157"),M=n.n(S),x={namespaced:!0,state:{myCart:{carts:[]}},actions:{addtoCart:function(e,t){var n=t.id,o=t.qty,c="".concat(Object({NODE_ENV:"production",VUE_APP_API:"https://vue-course-api.hexschool.io",VUE_APP_CLI_UI_URL:"",VUE_APP_CUSTOM_PATH:"charles",BASE_URL:"/Lets-Cafe/"}).VUE_APP_API_PATH,"/api/").concat("charles","/cart");e.commit("LOADINGITEM",n,{root:!0});var u={product_id:n,qty:o};r.a.post(c,{data:u}).then(function(t){console.log("加入購物車",t),e.dispatch("getCart"),(new a["a"]).$bus.$emit("push-msg",t.data.message,"success"),e.commit("LOADINGITEM","",{root:!0})})},getCart:function(e){var t="".concat(Object({NODE_ENV:"production",VUE_APP_API:"https://vue-course-api.hexschool.io",VUE_APP_CLI_UI_URL:"",VUE_APP_CUSTOM_PATH:"charles",BASE_URL:"/Lets-Cafe/"}).VUE_APP_API_PATH,"/api/").concat("charles","/cart");e.commit("LOADING",!0,{root:!0}),r.a.get(t).then(function(t){console.log("cart 購物車",t.data.data),e.commit("CART",t.data.data),e.commit("LOADING",!1,{root:!0})})},removeCart:function(e,t){var n="".concat(Object({NODE_ENV:"production",VUE_APP_API:"https://vue-course-api.hexschool.io",VUE_APP_CLI_UI_URL:"",VUE_APP_CUSTOM_PATH:"charles",BASE_URL:"/Lets-Cafe/"}).VUE_APP_API_PATH,"/api/").concat("charles","/cart/").concat(t);e.commit("LOADING",!0,{root:!0}),r.a.delete(n).then(function(t){console.log("刪除購物車",t),M()("#removeModal").modal("hide"),(new a["a"]).$bus.$emit("push-msg",t.data.message,"success"),e.dispatch("getCart"),e.commit("LOADING",!1,{root:!0})})}},mutations:{CART:function(e,t){e.myCart=t}},getters:{myCart:function(e){return e.myCart}}};a["a"].use(o["a"]);var R=new o["a"].Store({strict:!0,state:{isLoading:!1,loadingItem:""},actions:{updateLoading:function(e,t){e.commit("LOADING",t)}},mutations:{LOADING:function(e,t){e.isLoading=t},LOADINGITEM:function(e,t){console.log(t),e.loadingItem=t}},getters:{},modules:{productsModule:V,cartModule:x}});a["a"].prototype.$bus=new a["a"];n("a481"),n("c5f6");var j=function(e){var t=Number(e);return"$".concat(t.toFixed(0).replace(/./g,function(e,t,n){var a=t&&"."!==e&&(n.length-t)%3===0?", ".concat(e).replace(/\s/g,""):e;return a}))},G=function(e){var t=new Date(1e3*e);return t.toLocaleDateString()};a["a"].config.productionTip=!1,a["a"].use(o["a"]),a["a"].use(s.a,r.a),a["a"].use(d["a"]),d["a"].Validator.localize("zh_TW",p.a),a["a"].component("Alert",h["a"]),a["a"].component("Loading",l.a),a["a"].component("Pagination",A),a["a"].filter("currency",j),a["a"].filter("date",G),new a["a"]({router:T,store:R,render:function(e){return e(L)}}).$mount("#app"),T.beforeEach(function(e,t,n){if(console.log("to",e,"from",t,"next",n),e.meta.requiresAuth){var a="".concat(Object({NODE_ENV:"production",VUE_APP_API:"https://vue-course-api.hexschool.io",VUE_APP_CLI_UI_URL:"",VUE_APP_CUSTOM_PATH:"charles",BASE_URL:"/Lets-Cafe/"}).API_PATH,"/api/user/check");r.a.post(a).then(function(e){console.log("驗證登入",e.data),e.data.success?n():n({path:"/login"})})}else n()})},"5c0b":function(e,t,n){"use strict";var a=n("5e27"),o=n.n(a);o.a},"5e27":function(e,t,n){},dfbe:function(e,t,n){}});
//# sourceMappingURL=app.27b70aba.js.map